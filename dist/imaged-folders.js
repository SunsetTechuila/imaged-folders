var imagedDfolders=(()=>{var e="sp://core-playlist/v1/rootlist",s="folder-image",r=".main-yourLibraryX-libraryRootlist > div",t="aria-labelledby",i=`div[${t} *= "folder:"]`,n=`li.main-useDropTarget-folder:has(${i})`,a="#spicetify-playlist-list > div > div:nth-child(2)",o="#spicetify-playlist-list .main-gridContainer-gridContainer",l="main-cardImage-image",c="x-entityImage-image",d="playlist.edit-details.remove-photo",m="playlist.edit-details.error.file-upload-failed",g="choose_photo";function u(){return Boolean(document.querySelector(o))}function f(e){e.getElementsByClassName("main-image-image")[0]?.remove(),e.querySelector('div[class *= "imagePlaceholder"]')?.remove()}function p(){return document.querySelector(u()?o:a)}function v(e){return document.querySelector(n.replace('folder:"',`folder:${e}"`))}function y(e){return e.querySelector(u()?".main-cardImage-imageWrapper > div":".x-entityImage-imageContainer")}function h(e){if(!(e instanceof Element))return Spicetify.URI.from(e)?.id;e=e.querySelector(i);if(e){e=e.getAttribute(t)?.match(/folder:(\w+)$/);if(e)return e[1]}}function w(){var i=[],a=document.querySelectorAll(n);for(let e=0,t=a.length;e<t;e+=1){var r=function(e){var t=h(e);if(t){t=localStorage.getItem(s+":"+t);if(t){e=y(e);if(e)return{imageContainer:e,imageBase64:t}}}return null}(a[e]);r&&i.push(r)}return i}function S(e,t){var i=document.createElement("img");i.classList.add("main-image-image","main-image-loaded",u()?l:c),i.src=t,f(e),e.prepend(i)}function b(e){t=document.createElement("div"),i=document.createElementNS("http://www.w3.org/2000/svg","svg"),a=document.createElementNS("http://www.w3.org/2000/svg","path"),n=u(),r=n?"64":"24",t.classList.add(n?"main-card-imagePlaceholder":"x-entityImage-imagePlaceholder"),i.classList.add("Svg-sc-ytk21e-0",n?"Svg-img-textSubdued-64-icon":"Svg-img-24-icon"),i.setAttribute("height",r+"px"),i.setAttribute("width",r+"px"),i.setAttribute("viewBox","0 0 24 24"),i.setAttribute("aria-hidden","true"),i.setAttribute("role","img"),a.setAttribute("d","M1 4a2 2 0 0 1 2-2h5.155a3 3 0 0 1 2.598 1.5l.866 1.5H21a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V4zm7.155 0H3v16h18V7H10.464L9.021 4.5a1 1 0 0 0-.866-.5z"),i.appendChild(a),t.appendChild(i);var t,i,a,r,n=t;f(e),e.prepend(n)}async function C(){const i=[];return(await Spicetify.CosmosAsync.get(e)).rows?.forEach(e=>function t(e){"folder"===e.type&&(i.push(e.id),e.rows?.forEach(e=>t(e)))}(e)),i}function I(){var i,a=w();for(let e=0,t=a.length;e<t;e+=1)i=a[e].imageContainer,Boolean(i.getElementsByClassName(u()?l:c)[0])||S(a[e].imageContainer,a[e].imageBase64)}function x(){var{ContextMenu:e,Locale:t}=Spicetify;const i=Spicetify.URI["isFolder"];var a=t.get(d);const r=t.get(m);var n,o,t=t.get(g);(n=document.createElement("form")).setAttribute("aria-hidden","true"),(o=document.createElement("input")).classList.add("hidden-visually"),o.setAttribute("type","file"),o.accept=["image/jpeg","image/apng","image/avif","image/gif","image/png","image/webp"].join(","),n.appendChild(o);const[l,c]=[n,o];document.body.appendChild(l),c.onchange=()=>{var e;c.files?.length&&((e=new FileReader).onload=async e=>{try{o=e.target?.result;var t=await new Promise(r=>{const n=new Image;n.onload=()=>{let{width:e,height:t}=n;e>t?354<e&&(t*=354/e,e=354):354<t&&(e*=354/t,t=354);var i=document.createElement("canvas");i.width=e,i.height=t;i.getContext("2d").drawImage(n,0,0,e,t);var a=i.toDataURL("image/png");i.remove(),r(a)},n.src=o});i=c.id,a=t,localStorage.setItem(s+":"+i,a),(i=v(i))&&(i=y(i))&&S(i,a)}catch(e){console.log(e),Spicetify.showNotification(r)}var i,a,o},e.readAsDataURL(c.files[0]))},new e.Item(a,([e])=>{var e=h(e);e&&(e=e,localStorage.removeItem(s+":"+e),e=v(e))&&(e=y(e))&&b(e)},([e])=>{return i(e)&&(e=h(e),Boolean(localStorage.getItem(s+":"+e)))},"x").register(),new e.Item(t,([e])=>{e=h(e);e&&(c.id=e,l.reset(),c.click())},([e])=>i(e),"edit").register()}function A(){if(Spicetify?.Locale&&Spicetify?.URI&&Spicetify?.ContextMenu&&Spicetify?.CosmosAsync&&p()){I();{let t=p();const i={childList:!0},a=new MutationObserver(I);var e=document.querySelector(r);new MutationObserver(function e(){t?.isConnected||((t=p())?(I(),a.observe(t,i)):setTimeout(e,300))}).observe(e,{childList:!0}),a.observe(t,i)}x(),!async function(){var i=await C();for(let e=0,t=localStorage.length;e<t;e+=1){var a=localStorage.key(e),r=new RegExp(s+":(\\w+)$"),r=a.match(r);r&&(r=r[1],-1===i.indexOf(r))&&localStorage.removeItem(a)}}()}else setTimeout(A,300)}(async()=>{await A()})()})();