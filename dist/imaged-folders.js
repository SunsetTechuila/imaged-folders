var imagedDfolders=(()=>{var e="sp://core-playlist/v1/rootlist",c="folder-image",l="playlist-item__img",r="main-yourLibraryX-libraryRootlist",t="#spicetify-playlist-list > div > div:nth-child(2)",i="#spicetify-playlist-list .main-gridContainer-gridContainer";function n(){return Boolean(document.getElementsByClassName("main-yourLibraryX-entryPoints")[0])}function a(e){e=n()?e.getAttribute("aria-labelledby")?.match(/folder:(\w+)$/):e.getAttribute("href")?.match(/folder\/(\w+)$/);if(e)return e[1]}function s(e){(n()?(e.getElementsByClassName("main-image-image")[0]?.remove(),e.querySelector('div[class *= "imagePlaceholder"]')):e.getElementsByClassName(l)[0])?.remove()}function o(){var e;return n()&&(e=Spicetify.Platform.LocalStorageAPI,Boolean(e.getItem("items-view")))&&2===e.getItem("ylx-sidebar-state")?document.querySelector(i):document.querySelector(t)}function m(e){return document.querySelector(n()?`li.main-useDropTarget-folder:has(div[aria-labelledby *= "folder:${e}"])`:`li.main-rootlist-rootlistItem:has(.main-rootlist-rootlistItemLink[href *= "folder/${e}"])`)}function d(t){if(n()){let e=t.querySelector(".x-entityImage-imageContainer");return e=e||t.querySelector(".main-cardImage-imageWrapper > div")}return t.firstElementChild?.classList.contains(l)?t:null}function g(t){if(t instanceof Element){let e=a(t);var i;return e||(i=t.querySelector(n()?'div[aria-labelledby *= "folder:"]':'a.main-rootlist-rootlistItemLink[href *= "folder/"]'))&&(e=a(i)),e}return Spicetify.URI.from(t)?.id}function u(){var i=[],a=n()?document.querySelectorAll('li.main-useDropTarget-folder:has(div[aria-labelledby *= "folder:"])'):document.querySelectorAll('li.main-rootlist-rootlistItem:has(.main-rootlist-rootlistItemLink[href *= "folder/"])');for(let e=0,t=a.length;e<t;e+=1){var r,o=g(a[e]);o&&(o=localStorage.getItem(c+":"+o))&&(r=d(a[e]))&&i.push({imageContainer:r,imageBase64:o})}return i}function f(e,t){var i,a=document.createElement("img");n()?(i=""===e.className,a.classList.add("main-image-image","main-image-loaded",i?"main-cardImage-image":"x-entityImage-image")):a.classList.add(l),a.src=t,s(e),e.prepend(a)}function p(e){var t,i,a,r=""===e.className,o=n()?(r=r,o=document.createElement("div"),t=document.createElementNS("http://www.w3.org/2000/svg","svg"),i=document.createElementNS("http://www.w3.org/2000/svg","path"),a=r?"64":"24",o.classList.add("Svg-sc-ytk21e-0",r?"main-card-imagePlaceholder":"x-entityImage-imagePlaceholder"),t.classList.add(`Svg-img-textSubdued-${a}-icon`),t.setAttribute("style",`height: ${a}; width: ${a}; viewbox: 0 0 24 24;`),t.setAttribute("aria-hidden","true"),t.setAttribute("role","img"),i.setAttribute("d","M1 4a2 2 0 0 1 2-2h5.155a3 3 0 0 1 2.598 1.5l.866 1.5H21a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V4zm7.155 0H3v16h18V7H10.464L9.021 4.5a1 1 0 0 0-.866-.5z"),t.appendChild(i),o.appendChild(t),o):(r=document.createElement("div"),a=document.createElementNS("http://www.w3.org/2000/svg","svg"),i=document.createElementNS("http://www.w3.org/2000/svg","path"),t=document.createElementNS("http://www.w3.org/2000/svg","path"),r.classList.add(l,"folder"),a.setAttribute("style","height: 24px; width: 24px; viewbox: 0 0 24 24; fill: #FFFFFF"),i.setAttribute("d","M0 0h24v24H0V0z"),i.setAttribute("fill","none"),t.setAttribute("d","M9.17 6l2 2H20v10H4V6h5.17M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"),a.append(i,t),r.appendChild(a),r);s(e),e.prepend(o)}async function h(){const i=[];return(await Spicetify.CosmosAsync.get(e)).rows?.forEach(e=>function t(e){"folder"===e.type&&(i.push(e.id),e.rows?.forEach(e=>t(e)))}(e)),i}function y(){var i=u();for(let e=0,t=i.length;e<t;e+=1)f(i[e].imageContainer,i[e].imageBase64)}function v(){var{ContextMenu:e,Locale:t}=Spicetify;const i=Spicetify.URI["isFolder"];var a=t.get("playlist.edit-details.remove-photo");const r=t.get("playlist.edit-details.error.file-upload-failed");var o,l,t=t.get("choose_photo");(o=document.createElement("form")).setAttribute("aria-hidden","true"),(l=document.createElement("input")).classList.add("hidden-visually"),l.setAttribute("type","file"),l.accept=["image/jpeg","image/apng","image/avif","image/gif","image/png","image/svg+xml","image/webp"].join(","),o.appendChild(l);const[n,s]=[o,l];document.body.appendChild(n),s.onchange=()=>{var e;s.files?.length&&((e=new FileReader).onload=e=>{try{t=s.id,i=e.target?.result,localStorage.setItem(c+":"+t,i),(t=m(t))&&(t=d(t))&&f(t,i)}catch{Spicetify.showNotification(r)}var t,i},e.readAsDataURL(s.files[0]))},new e.Item(a,([e])=>{var e=g(e);e&&(e=e,localStorage.removeItem(c+":"+e),e=m(e))&&(e=d(e))&&p(e)},([e])=>{return i(e)&&(e=g(e),Boolean(localStorage.getItem(c+":"+e)))},"x").register(),new e.Item(t,([e])=>{e=g(e);e&&(s.id=e,n.reset(),s.click())},([e])=>i(e),"edit").register()}async function w(){await new Promise(e=>{const t=()=>{Spicetify?.Locale&&Spicetify?.URI&&Spicetify?.ContextMenu&&Spicetify?.CosmosAsync&&Spicetify?.Platform?.LocalStorageAPI&&o()?e(!0):setTimeout(t,300)};t()}),async function(){var i=await h();for(let e=0,t=localStorage.length;e<t;e+=1){var a=localStorage.key(e),r=new RegExp(c+":(\\w+)$"),r=a.match(r);r&&(r=r[1],-1===i.indexOf(r))&&localStorage.removeItem(a)}}(),y(),v();{let t=o();const i={childList:!0},a=new MutationObserver(y);var e=document.getElementsByClassName(r)[0];new MutationObserver(function e(){t?.isConnected||((t=o())?a.observe(t,i):setTimeout(e,300))}).observe(e,{childList:!0,subtree:!0}),a.observe(t,i)}}(async()=>{await w()})()})();