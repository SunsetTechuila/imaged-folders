var imagedDfolders=(()=>{var e="sp://core-playlist/v1/rootlist",s="folder-image",r=".main-yourLibraryX-libraryRootlist > div",t='li.main-useDropTarget-folder:has(div[aria-labelledby *= "folder:"])',a="#spicetify-playlist-list > div > div:nth-child(2)",i="#spicetify-playlist-list .main-gridContainer-gridContainer";function o(){var e=Spicetify.Platform["LocalStorageAPI"];return Boolean(e.getItem("items-view"))&&2===e.getItem("ylx-sidebar-state")}function n(e){e.getElementsByClassName("main-image-image")[0]?.remove(),e.querySelector('div[class *= "imagePlaceholder"]')?.remove()}function l(){return document.querySelector(o()?i:a)}function d(e){return document.querySelector(`li.main-useDropTarget-folder:has(div[aria-labelledby *= "folder:${e}"])`)}function m(e){return e.querySelector(o()?".main-cardImage-imageWrapper > div":".x-entityImage-imageContainer")}function g(e){if(!(e instanceof Element))return Spicetify.URI.from(e)?.id;e=e.querySelector('div[aria-labelledby *= "folder:"]');if(e){e=e.getAttribute("aria-labelledby")?.match(/folder:(\w+)$/);if(e)return e[1]}}function c(){var a=[],i=document.querySelectorAll(t);for(let e=0,t=i.length;e<t;e+=1){var r=function(e){var t=g(e);if(t){t=localStorage.getItem(s+":"+t);if(t){e=m(e);if(e)return{imageContainer:e,imageBase64:t}}}return null}(i[e]);r&&a.push(r)}return a}function u(e,t){var a=document.createElement("img"),i=""===e.className;a.classList.add("main-image-image","main-image-loaded",i?"main-cardImage-image":"x-entityImage-image"),a.src=t,n(e),e.prepend(a)}function f(e){var t,a,i,r,o=""===e.className,o=(o=o,t=document.createElement("div"),a=document.createElementNS("http://www.w3.org/2000/svg","svg"),i=document.createElementNS("http://www.w3.org/2000/svg","path"),r=o?"64":"24",t.classList.add(o?"main-card-imagePlaceholder":"x-entityImage-imagePlaceholder"),a.classList.add("Svg-sc-ytk21e-0",o?"Svg-img-textSubdued-64-icon":"Svg-img-24-icon"),a.setAttribute("height",r+"px"),a.setAttribute("width",r+"px"),a.setAttribute("viewBox","0 0 24 24"),a.setAttribute("aria-hidden","true"),a.setAttribute("role","img"),i.setAttribute("d","M1 4a2 2 0 0 1 2-2h5.155a3 3 0 0 1 2.598 1.5l.866 1.5H21a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V4zm7.155 0H3v16h18V7H10.464L9.021 4.5a1 1 0 0 0-.866-.5z"),a.appendChild(i),t.appendChild(a),t);n(e),e.prepend(o)}async function p(){const a=[];return(await Spicetify.CosmosAsync.get(e)).rows?.forEach(e=>function t(e){"folder"===e.type&&(a.push(e.id),e.rows?.forEach(e=>t(e)))}(e)),a}function v(){var a=c();for(let e=0,t=a.length;e<t;e+=1)u(a[e].imageContainer,a[e].imageBase64)}function y(){var{ContextMenu:e,Locale:t}=Spicetify;const a=Spicetify.URI["isFolder"];var i=t.get("playlist.edit-details.remove-photo");const r=t.get("playlist.edit-details.error.file-upload-failed");var o,n,t=t.get("choose_photo");(o=document.createElement("form")).setAttribute("aria-hidden","true"),(n=document.createElement("input")).classList.add("hidden-visually"),n.setAttribute("type","file"),n.accept=["image/jpeg","image/apng","image/avif","image/gif","image/png","image/webp"].join(","),o.appendChild(n);const[l,c]=[o,n];document.body.appendChild(l),c.onchange=()=>{var e;c.files?.length&&((e=new FileReader).onload=async e=>{try{n=e.target?.result;var t=await new Promise(r=>{const o=new Image;o.onload=()=>{let{width:e,height:t}=o;e>t?236<e&&(t*=236/e,e=236):236<t&&(e*=236/t,t=236);var a=document.createElement("canvas");a.width=e,a.height=t;a.getContext("2d").drawImage(o,0,0,e,t);var i=a.toDataURL("image/png");a.remove(),r(i)},o.src=n});a=c.id,i=t,localStorage.setItem(s+":"+a,i),(a=d(a))&&(a=m(a))&&u(a,i)}catch(e){console.log(e),Spicetify.showNotification(r)}var a,i,n},e.readAsDataURL(c.files[0]))},new e.Item(i,([e])=>{var e=g(e);e&&(e=e,localStorage.removeItem(s+":"+e),e=d(e))&&(e=m(e))&&f(e)},([e])=>{return a(e)&&(e=g(e),Boolean(localStorage.getItem(s+":"+e)))},"x").register(),new e.Item(t,([e])=>{e=g(e);e&&(c.id=e,l.reset(),c.click())},([e])=>a(e),"edit").register()}function h(){if(Spicetify?.Locale&&Spicetify?.URI&&Spicetify?.ContextMenu&&Spicetify?.CosmosAsync&&Spicetify?.Platform?.LocalStorageAPI&&l()){!async function(){var a=await p();for(let e=0,t=localStorage.length;e<t;e+=1){var i=localStorage.key(e),r=new RegExp(s+":(\\w+)$"),r=i.match(r);r&&(r=r[1],-1===a.indexOf(r))&&localStorage.removeItem(i)}}(),y();{let t=l();const a={childList:!0},i=new MutationObserver(v);var e=document.querySelector(r);new MutationObserver(function e(){t?.isConnected||((t=l())?i.observe(t,a):setTimeout(e,300))}).observe(e,{childList:!0}),i.observe(t,a)}v()}else setTimeout(h,300)}(async()=>{await h()})()})();