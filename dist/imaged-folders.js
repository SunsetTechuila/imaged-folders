var imagedDfolders=(()=>{var e="sp://core-playlist/v1/rootlist",s="folder-image",r=".main-yourLibraryX-libraryRootlist > div",t='li.main-useDropTarget-folder:has(div[aria-labelledby *= "folder:"])',i="#spicetify-playlist-list > div > div:nth-child(2)",a="#spicetify-playlist-list .main-gridContainer-gridContainer";function o(){var e=Spicetify.Platform["LocalStorageAPI"];return Boolean(e.getItem("items-view"))&&2===e.getItem("ylx-sidebar-state")}function n(e){e.getElementsByClassName("main-image-image")[0]?.remove(),e.querySelector('div[class *= "imagePlaceholder"]')?.remove()}function l(){return document.querySelector(o()?a:i)}function d(e){return document.querySelector(`li.main-useDropTarget-folder:has(div[aria-labelledby *= "folder:${e}"])`)}function m(e){return e.querySelector(o()?".main-cardImage-imageWrapper > div":".x-entityImage-imageContainer")}function g(e){if(!(e instanceof Element))return Spicetify.URI.from(e)?.id;e=e.querySelector('div[aria-labelledby *= "folder:"]');if(e){e=e.getAttribute("aria-labelledby")?.match(/folder:(\w+)$/);if(e)return e[1]}}function c(){var i=[],a=document.querySelectorAll(t);for(let e=0,t=a.length;e<t;e+=1){var r=function(e){var t=g(e);if(t){t=localStorage.getItem(s+":"+t);if(t){e=m(e);if(e)return{imageContainer:e,imageBase64:t}}}return null}(a[e]);r&&i.push(r)}return i}function u(e,t){var i=document.createElement("img"),a=""===e.className;i.classList.add("main-image-image","main-image-loaded",a?"main-cardImage-image":"x-entityImage-image"),i.src=t,n(e),e.prepend(i)}function f(e){var t,i,a,r,o=""===e.className,o=(o=o,t=document.createElement("div"),i=document.createElementNS("http://www.w3.org/2000/svg","svg"),a=document.createElementNS("http://www.w3.org/2000/svg","path"),r=o?"64":"24",t.classList.add(o?"main-card-imagePlaceholder":"x-entityImage-imagePlaceholder"),i.classList.add("Svg-sc-ytk21e-0",o?"Svg-img-textSubdued-64-icon":"Svg-img-24-icon"),i.setAttribute("height",r+"px"),i.setAttribute("width",r+"px"),i.setAttribute("viewBox","0 0 24 24"),i.setAttribute("aria-hidden","true"),i.setAttribute("role","img"),a.setAttribute("d","M1 4a2 2 0 0 1 2-2h5.155a3 3 0 0 1 2.598 1.5l.866 1.5H21a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V4zm7.155 0H3v16h18V7H10.464L9.021 4.5a1 1 0 0 0-.866-.5z"),i.appendChild(a),t.appendChild(i),t);n(e),e.prepend(o)}async function p(){const i=[];return(await Spicetify.CosmosAsync.get(e)).rows?.forEach(e=>function t(e){"folder"===e.type&&(i.push(e.id),e.rows?.forEach(e=>t(e)))}(e)),i}function v(){var i=c();for(let e=0,t=i.length;e<t;e+=1)u(i[e].imageContainer,i[e].imageBase64)}function y(){var{ContextMenu:e,Locale:t}=Spicetify;const i=Spicetify.URI["isFolder"];var a=t.get("playlist.edit-details.remove-photo");const r=t.get("playlist.edit-details.error.file-upload-failed");var o,n,t=t.get("choose_photo");(o=document.createElement("form")).setAttribute("aria-hidden","true"),(n=document.createElement("input")).classList.add("hidden-visually"),n.setAttribute("type","file"),n.accept=["image/jpeg","image/apng","image/avif","image/gif","image/png","image/svg+xml","image/webp"].join(","),o.appendChild(n);const[l,c]=[o,n];document.body.appendChild(l),c.onchange=()=>{var e;c.files?.length&&((e=new FileReader).onload=e=>{try{t=c.id,i=e.target?.result,localStorage.setItem(s+":"+t,i),(t=d(t))&&(t=m(t))&&u(t,i)}catch(e){console.log(e),Spicetify.showNotification(r)}var t,i},e.readAsDataURL(c.files[0]))},new e.Item(a,([e])=>{var e=g(e);e&&(e=e,localStorage.removeItem(s+":"+e),e=d(e))&&(e=m(e))&&f(e)},([e])=>{return i(e)&&(e=g(e),Boolean(localStorage.getItem(s+":"+e)))},"x").register(),new e.Item(t,([e])=>{e=g(e);e&&(c.id=e,l.reset(),c.click())},([e])=>i(e),"edit").register()}function h(){if(Spicetify?.Locale&&Spicetify?.URI&&Spicetify?.ContextMenu&&Spicetify?.CosmosAsync&&Spicetify?.Platform?.LocalStorageAPI&&l()){!async function(){var i=await p();for(let e=0,t=localStorage.length;e<t;e+=1){var a=localStorage.key(e),r=new RegExp(s+":(\\w+)$"),r=a.match(r);r&&(r=r[1],-1===i.indexOf(r))&&localStorage.removeItem(a)}}(),y();{let t=l();const i={childList:!0},a=new MutationObserver(v);var e=document.querySelector(r);new MutationObserver(function e(){t?.isConnected||((t=l())?a.observe(t,i):setTimeout(e,300))}).observe(e,{childList:!0}),a.observe(t,i)}v()}else setTimeout(h,300)}(async()=>{await h()})()})();